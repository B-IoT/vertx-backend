orbs:
  gradle: circleci/gradle@2.2.0
version: 2.1
machine: true
jobs:
  docker_compose:
    steps:
      - checkout
      - setup_remote_docker
      - run:
          name: Start container and verify it's working
          command: |
            set -x
            docker-compose up -d
workflows:
  checkout-build-test:
    jobs:
      - docker_compose
      - gradle/test